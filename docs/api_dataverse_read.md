### GeoConnect reads file information from Dataverse


### Basic Flow
+ Dataverse passes a token to GeoConnect
	+ This token allows Dataverse to request information for a particular DV user and file
	+ Token is described in [api_dataverse_token.md](api_dataverse_token.md)
+ GeoConnect uses token to read file metadata
	+ In the case of .zip(s) containing multiple files, may offer user choice of a particular file or shapefile set
+ GeoConnect uses token to read file itself

### Input:  POST to Dataverse

+ Send a POST that includes token information related to API usage for a specific:
 	+ DV user
 	+ DV file
	+ limited time period (e.g., 30 minutes with refresh option)

+ **dv_session_token** - Token generated by Dataverse, usable by GeoConnect

### Output: JSON response

The JSON response depends on the outcome of the POST.  Roughly follow the [JSend](http://labs.omniti.com/labs/jsend) response guidelines for "success", "fail", and "error." 

### On Success: Information retrieved from Dataverse

+ **status** - "success"

	#### Dataverse Information ####

+ **dv_id** - owning dataverse primary key
+ **dv_name** - owning dataverse name for display

   #### Dataset Information ####

+ **dataset_id** - dataset primary key
+ **dataset_name** - dataset name for display
+ **dataset_citation** - dataset citation for display

   #### Datafile Information ####

+ **datafile_id** - id number
+ **datafile_version** - version number
+ **datafile_name** - for display; filemetadata.label   (dvobject.id = filemetadata.datafile_id)
+ **datafile_desc** - for display; filemetadata.description   (dvobject.id = filemetadata.datafile_id)
+ **datafile_type** - dvobject.contenttype
+ **datafile_expected_md5_checksum** - MD5 to verify file if it is retrieved

   #### .zip File Information ####
+ file names and sizes

```javascript
 	{ "zip_file_info" : [
 			{ 
				"filename" : "bicycles.shp",
				"filesize" : 48596,
			},
 			{ 
				"filename" : "bicycles.shx",
				"filesize" : 13956,
			},
 			{ 
				"filename" : "bicycles.prj",
				"filesize" : 567,
			},
 			{ 
				"filename" : "bicycles.dbf",
				"filesize" : 6803326,
			},
 			{ 
				"filename" : "bicycles.sbx",
				"filesize" : 972,
			},
 			{ 
				"filename" : "bicycles.sbn",
				"filesize" : 16804,
			},
			{ 
				"filename" : "manifest.txt",
				"filesize" : 201,
			},
			{ 
				"filename" : "bicycle_sheet.xls",
				"filesize" : 41453,
			},
		] }
```

   #### User Session Information ####

+ **dv_session_token** - Token to use for additional API calls in this session (TBD)

### On Fail:  Invalid data or call conditions

1. **status** - "fail"
2. **message** - User readable message
  +   Example: {   "status" : "fail",  
        "data" : "dv_session_token" : "Your session has expired.  Please log into dataverse to continue.  http://link-to-dataverse"  
    }

### On Error:  Server Error

1. **status** - "error"
2. **message** - User readable message
  +   Example: {   "status" : "fail",  
	        "message" : "Sorry!  The dataverse is currently not available."  
    }
